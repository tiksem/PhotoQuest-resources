<div id="user_left_sidebar_block" ng-controller="LoginController">
    <form id="login_form" ng-show="!getSignedInUser()">
        <label>
             {{tr.login}}
            <input autocapitalize="off" style="width: 155px;"name="login" ng-model="login" type="text"/>
        </label>
        <label>
            {{tr.password}}
            <input name="password" ng-model="password" type="password"/>
        </label>
		<div style="display:inline-block;">
			<button class="button" style="float: left;" id="button_sign_in" ng-click="signin();">{{tr.signIn}}</button>
			<img ng-show="loginLoading" src="../images/mini_loading.gif" height="20" width="20"  style="position: relative;
			top: 4px; float:right;"class="loading_small"/>
		</div>
			<br />
        <a id="register_link" href="#?path=register">
            {{tr.register}}</a>
        <br /><br />
        <div class="login-error-block">
            {{errorMessage}}
        </div>
    </form>

    <div id="user_menu_block" ng-show="getSignedInUser()">
        <a ng-href="#?path=profile&id={{getSignedInUser().id}}">
            <div id="user_avatar">
                <thumbnail size="125" src="getSignedInUser().avatar"></thumbnail>
            </div>
        </a>

        <div id="user_menu" >
            <div class="user_menu_link_container">
                <a class="user_info_link" ng-href="{{'#?path=profile&id=' + getSignedInUser().id}}">
                    <span class="user_button"> {{tr.profile}}</span>
                </a>
            </div>
            <div class="user_menu_link_container">
                <a  class="user_info_link" ng-href="#?path=dialogs">
                    <span class="user_button">
                          {{tr.messages}}
                         <span ng-show="getSignedInUser().unreadMessagesCount">
                             (+{{getSignedInUser().unreadMessagesCount}})
                         </span>
                     </span>
                </a>
            </div>
            <div class="user_menu_link_container">
                <a class="user_info_link" ng-href="{{
                getSignedInUser().receivedRequestsCount > 0 ? '#?path=received_requests' : '#?path=friends'
                }}">
                    <span class="user_button">
                          {{tr.friends}}
                         <span ng-show="getSignedInUser().receivedRequestsCount">
                             (+{{getSignedInUser().receivedRequestsCount}})
                         </span>
                     </span>
                </a>
            </div>
            <div class="user_menu_link_container">
                <a class="user_info_link" ng-href="#?path=following_quests&id={{getSignedInUser().id}}">
                    <span class="user_button"> {{tr.myPhotoquests}}</span>
                </a>
            </div>
            <div class="user_menu_link_container">
                <a class="user_info_link" ng-href="#?path=photos&id={{getSignedInUser().id}}">
                    <span class="user_button"> {{tr.myPhotos}}</span>
                </a>
            </div>
            <div class="user_menu_link_container">
                <a class="user_info_link" ng-href="#?path=news">
                    <span class="user_button">  {{tr.news}}</span>
                </a>
            </div>
            <div class="user_menu_link_container">
                <a class="user_info_link" ng-href="#?path=replies">
                     <span class="user_button">
                          {{tr.replies}}
                         <span ng-show="getSignedInUser().unreadRepliesCount">
                             (+{{getSignedInUser().unreadRepliesCount}})
                         </span>
                     </span>
                </a>
            </div>    
            <div class="user_menu_link_container">
                <a class="user_info_link" ng-href="#?path=settings">
                     <span class="user_button"> {{tr.settings}}</span>
                </a>
            </div>
        </div>
    </div>
</div>