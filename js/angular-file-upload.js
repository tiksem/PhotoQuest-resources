(function(){var p=angular.module("angularFileUpload",[]);p.service("$upload",["$http","$q","$timeout",function(f,m,n){function e(a){a.method=a.method||"POST";a.headers=a.headers||{};a.transformRequest=a.transformRequest||function(a,k){return window.ArrayBuffer&&a instanceof window.ArrayBuffer?a:f.defaults.transformRequest[0](a,k)};var c=m.defer();window.XMLHttpRequest.__isShim&&(a.headers.__setXHR_=function(){return function(b){b&&(a.__XHR=b,a.xhrFn&&a.xhrFn(b),b.upload.addEventListener("progress",
	function(a){c.notify(a)},!1),b.upload.addEventListener("load",function(a){a.lengthComputable&&c.notify(a)},!1))}});f(a).then(function(a){c.resolve(a)},function(a){c.reject(a)},function(a){c.notify(a)});var b=c.promise;b.success=function(d){b.then(function(b){d(b.data,b.status,b.headers,a)});return b};b.error=function(d){b.then(null,function(b){d(b.data,b.status,b.headers,a)});return b};b.progress=function(a){b.then(null,null,function(b){a(b)});return b};b.abort=function(){a.__XHR&&n(function(){a.__XHR.abort()});
	return b};b.xhr=function(c){a.xhrFn=function(a){return function(){a&&a.apply(b,arguments);c.apply(b,arguments)}}(a.xhrFn);return b};return b}this.upload=function(a){a.headers=a.headers||{};a.headers["Content-Type"]=void 0;a.transformRequest=a.transformRequest||f.defaults.transformRequest;var c=new FormData,b=a.transformRequest,d=a.data;a.transformRequest=function(c,e){if(d)if(a.formDataAppender)for(var g in d){var l=d[g];a.formDataAppender(c,g,l)}else for(g in d){l=d[g];if("function"==typeof b)l=
	b(l,e);else for(var h=0;h<b.length;h++){var r=b[h];"function"==typeof r&&(l=r(l,e))}c.append(g,l)}if(null!=a.file)if(g=a.fileFormDataName||"file","[object Array]"===Object.prototype.toString.call(a.file))for(l="[object String]"===Object.prototype.toString.call(g),h=0;h<a.file.length;h++)c.append(l?g:g[h],a.file[h],a.fileName&&a.fileName[h]||a.file[h].name);else c.append(g,a.file,a.fileName||a.file.name);return c};a.data=c;return e(a)};this.http=function(a){return e(a)}}]);p.directive("ngFileSelect",
	["$parse","$timeout",function(f,m){return function(n,e,a){var c=f(a.ngFileSelect);if("input"!==e[0].tagName.toLowerCase()||"file"!==(e.attr("type")&&e.attr("type").toLowerCase())){for(var b=angular.element('<input type="file">'),d=e[0].attributes,k=0;k<d.length;k++)"type"!==d[k].name.toLowerCase()&&b.attr(d[k].name,d[k].value);a.multiple&&b.attr("multiple","true");b.css("width","1px").css("height","1px").css("opacity",0).css("position","absolute").css("filter","alpha(opacity=0)").css("padding",0).css("margin",
		0).css("overflow","hidden");b.attr("__wrapper_for_parent_",!0);e.append(b);e[0].__file_click_fn_delegate_=function(){b[0].click()};e.bind("click",e[0].__file_click_fn_delegate_);e.css("overflow","hidden");e=b}e.bind("change",function(a){var b=[],l,h;l=a.__files_||a.target.files;if(null!=l)for(h=0;h<l.length;h++)b.push(l.item(h));m(function(){c(n,{$files:b,$event:a})})})}}]);p.directive("ngFileDropAvailable",["$parse","$timeout",function(f,m){return function(n,e,a){if("draggable"in document.createElement("span")){var c=
	f(a.ngFileDropAvailable);m(function(){c(n)})}}}]);p.directive("ngFileDrop",["$parse","$timeout","$location",function(f,m,n){return function(e,a,c){if("draggable"in document.createElement("span")){var b=function(a,c,e){if(null!=c)if(c.isDirectory){var d=c.createReader();g++;d.readEntries(function(d){for(var q=0;q<d.length;q++)b(a,d[q],(e?e:"")+c.name+"/");g--})}else g++,c.file(function(b){g--;b._relativePath=(e?e:"")+b.name;a.push(b)})},d=function(a,c){var e=[],d=a.dataTransfer.items;if(d&&0<d.length&&
	d[0].webkitGetAsEntry&&"file"!=n.protocol()&&d[0].webkitGetAsEntry().isDirectory)for(var f=0;f<d.length;f++){var k=d[f].webkitGetAsEntry();null!=k&&(/^[\000-\177]*$/.test(k.name)?b(e,k):d[f].webkitGetAsEntry().isDirectory||e.push(d[f].getAsFile()))}else if(d=a.dataTransfer.files,null!=d)for(f=0;f<d.length;f++)e.push(d.item(f));(function t(a){m(function(){g?t(10):c(e)},a||0)})()},k=null;a[0].addEventListener("dragover",function(b){b.preventDefault();m.cancel(k);a[0].__drag_over_class_||(c.ngFileDragOverClass&&
-1<c.ngFileDragOverClass.search(/\) *$/)?(b=f(c.ngFileDragOverClass)(e,{$event:b}),a[0].__drag_over_class_=b):a[0].__drag_over_class_=c.ngFileDragOverClass||"dragover");a.addClass(a[0].__drag_over_class_)},!1);a[0].addEventListener("dragenter",function(a){a.preventDefault()},!1);a[0].addEventListener("dragleave",function(b){k=m(function(){a.removeClass(a[0].__drag_over_class_);a[0].__drag_over_class_=null},c.ngFileDragOverDelay||1)},!1);var p=f(c.ngFileDrop);a[0].addEventListener("drop",function(b){b.preventDefault();
	a.removeClass(a[0].__drag_over_class_);a[0].__drag_over_class_=null;d(b,function(a){p(e,{$files:a,$event:b})})},!1);var g=0}}}])})();